<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Slot Machine Math Analyzer</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Rubik:wght@400;600&display=swap');
    :root {
      --color-primary: #0d9488;
      --color-primary-dark: #0f766e;
      --color-secondary: #2563eb;
      --color-secondary-dark: #1e40af;
      --color-bg: #f0f4f8;
      --color-text: #111827;
      --color-accent: #22c55e;
      --color-output-bg: #1e293b;
      --color-output-text: #86efac;
      --border-radius: 12px;
      --transition: 0.3s ease;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 2rem 1rem;
      background: var(--color-bg);
      font-family: 'Rubik', sans-serif;
      color: var(--color-text);
      display: flex;
      justify-content: center;
      min-height: 100vh;
      align-items: flex-start;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .container {
      max-width: 720px;
      width: 100%;
      background: white;
      padding: 2.5rem 3rem;
      border-radius: var(--border-radius);
      box-shadow: 0 12px 24px rgba(13, 20, 33, 0.15);
      position: relative;
    }
    h1 {
      font-size: 2.2rem;
      font-weight: 600;
      text-align: center;
      margin-bottom: 2rem;
      background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      user-select: none;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }
    form label {
      display: block;
      margin-bottom: 1rem;
      font-weight: 600;
      color: var(--color-primary-dark);
    }
    input[type=number],
    select {
      width: 100%;
      padding: 0.55rem 0.8rem;
      font-size: 1rem;
      border: 2px solid #cbd5e1;
      border-radius: 8px;
      font-family: 'Roboto Mono', monospace;
      transition: border-color var(--transition);
    }
    input[type=number]:focus,
    select:focus {
      outline: none;
      border-color: var(--color-secondary);
      box-shadow: 0 0 6px var(--color-secondary);
    }
    button {
      margin-top: 2.5rem;
      width: 100%;
      padding: 0.9rem;
      background: var(--color-primary);
      border: none;
      border-radius: var(--border-radius);
      color: white;
      font-size: 1.15rem;
      font-weight: 700;
      cursor: pointer;
      letter-spacing: 0.03em;
      box-shadow: 0 5px 12px rgba(13, 148, 136, 0.5);
      transition: background-color var(--transition), box-shadow var(--transition);
      user-select: none;
    }
    button:hover {
      background: var(--color-primary-dark);
      box-shadow: 0 8px 18px rgba(15, 118, 110, 0.8);
    }
output-box {
  margin-top: 2.5rem;
  background: var(--color-output-bg);
  color: var(--color-output-text);
  font-family: 'Roboto Mono', monospace;
  font-size: 0.7rem; /* أصغر حجم خط */
  padding: 1rem 1.5rem;
  border-radius: 10px;
  min-height: 180px;
  max-height: 420px;
  overflow-y: auto;
  white-space: pre-wrap;
  box-shadow: inset 0 0 8px rgba(0, 255, 136, 0.4);
  user-select: text;
  position: relative;
  left: 50%;
  right: 50%;
  margin-left: -50vw; /* تعويض نصف عرض الشاشة */
  margin-right: -50vw;
  width: 100vw; /* عرض كامل الشاشة */
  max-width: 100vw; /* ضمان عدم تجاوز العرض */
  box-sizing: border-box;
}
    #scatterOptions,
    #wildOptions {
      margin-top: 1rem;
      padding: 1rem 1.25rem;
      border-left: 4px solid var(--color-secondary);
      background: #e0f2fe;
      border-radius: 8px;
      transition: max-height 0.4s ease, opacity 0.4s ease;
      overflow: hidden;
    }
    #scatterOptions[style*="display: none"],
    #wildOptions[style*="display: none"] {
      max-height: 0;
      opacity: 0;
      padding: 0 1.25rem;
      border-left: none;
    }
    @media (max-width: 480px) {
      .container {
        padding: 2rem 1.5rem;
      }
      h1 {
        font-size: 1.6rem;
      }
    }
  </style>
</head>
<body>
  <div class="container" role="main" aria-label="Slot Machine Math Analyzer">
    <h1>Slot Machine Math Analyzer</h1>
    <form id="slotForm" aria-describedby="output">
      <label for="total_num_symbols">Total Number of Symbols:</label>
      <input type="number" id="total_num_symbols" name="total_num_symbols" min="1" required aria-required="true" />
      <label for="rows">Number of Rows:</label>
      <input type="number" id="rows" name="rows" min="1" required aria-required="true" />
      <label for="columns">Number of Columns:</label>
      <input type="number" id="columns" name="columns" min="1" required aria-required="true" />
      <label for="min_win">Minimum Matching Symbols to Win:</label>
      <input type="number" id="min_win" name="min_win" min="1" required aria-required="true" />
      <label for="scatterSelect">Include Scatter Symbols?</label>
      <select name="scatter" id="scatterSelect" required aria-required="true">
        <option value="false" selected>No</option>
        <option value="true">Yes</option>
      </select>
      <div id="scatterOptions" style="display:none;" aria-live="polite" aria-hidden="true">
        <label for="min_win_scatter">Minimum Scatters to Trigger Win:</label>
        <input type="number" id="min_win_scatter" name="min_win_scatter" min="1" />
        <label for="free_spins_retigger">Free Spins Retigger Allowed?</label>
        <select name="free_spins_retigger" id="free_spins_retigger">
          <option value="false" selected>No</option>
          <option value="true">Yes</option>
        </select>
        <label for="num_free_spin">Number of Free Spins:</label>
        <input type="number" id="num_free_spin" name="num_free_spin" min="0" />
        <label for="multiplier">Multiplier:</label>
        <input type="number" id="multiplier" name="multiplier" step="0.1" min="0" />
      </div>
      <label for="wildSelect">Include Wild Symbols?</label>
      <select name="wild" id="wildSelect" required aria-required="true">
        <option value="false" selected>No</option>
        <option value="true">Yes</option>
      </select>
      <div id="wildOptions" style="display:none;" aria-live="polite" aria-hidden="true">
        <label for="jackpot">Jackpot:</label>
        <input type="number" id="jackpot" name="jackpot" min="0" />
      </div>
      <label for="rtp">Player Return (RTP %):</label>
      <input type="number" id="rtp" name="rtp" step="0.1" min="0" max="100" required aria-required="true" />
      <label for="rtp_range">RTP Range:</label>
      <input type="number" id="rtp_range" name="rtp_range" step="0.1" min="0" required aria-required="true" />
      <button type="submit" aria-label="Analyze Slot Machine Parameters">Analyze</button>
    </form>
    <div class="output-box" id="output" role="region" aria-live="polite" aria-label="Analysis output">
      Waiting for analysis...
    </div>
  </div>
  <script>
    const scatterSelect = document.getElementById('scatterSelect');
    const wildSelect = document.getElementById('wildSelect');
    const scatterOptions = document.getElementById('scatterOptions');
    const wildOptions = document.getElementById('wildOptions');
    const outputDiv = document.getElementById('output');
    scatterSelect.addEventListener('change', () => {
      scatterOptions.style.display = (scatterSelect.value === 'true') ? 'block' : 'none';
    });
    wildSelect.addEventListener('change', () => {
      wildOptions.style.display = (wildSelect.value === 'true') ? 'block' : 'none';
    });

document.getElementById('slotForm').addEventListener('submit', function(e) {
  e.preventDefault();
  const formData = new FormData(this);
  const result = {};
  for (let [key, value] of formData.entries()) {
    if (value === 'true') result[key] = true;
    else if (value === 'false') result[key] = false;
    else if (!isNaN(value)) result[key] = Number(value);
    else result[key] = value;
  }

  outputDiv.textContent = "Running analysis...\n";

  fetch("https://chigger-blessed-bat.ngrok-free.app/receive", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(result)
  }).then(response => {
    const reader = response.body.getReader();
    const decoder = new TextDecoder("utf-8");

    function readStream() {
      reader.read().then(({ done, value }) => {
        if (done) {
          outputDiv.textContent += "\n✅ Analysis finished.";
          return;
        }
        const chunk = decoder.decode(value, { stream: true });
        outputDiv.textContent += chunk;
        outputDiv.scrollTop = outputDiv.scrollHeight; // auto-scroll to bottom
        readStream(); // keep reading
      });
    }

    readStream();
  }).catch(err => {
    outputDiv.textContent += "\n❌ Error: " + err.message;
  });
});


    
  </script>
</body>
</html>
